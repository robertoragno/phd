---
always_allow_html: true
---

# Overview {.unnumbered style="text-align:justify;"}

This research aims to diachronically trace the patterns of subsistence, economy, and environmental change in relation to regional patterns of Italian peasantry in the 1^st^ millennium CE. Scholarly debate on the dynamics of human-nature interaction in Italy during the transition from Late Antiquity to the early Middle Ages still leaves today some open questions. Were the former Roman economic structures and farming practices completely abandoned or did they find continuity during this turbulent time? Which agricultural strategies did peasants develop to cope with political, demographic and climatic change? Past work on agricultural production has been based upon literary sources and field surveys which identify boundaries; a multi-source archaeological study is absent from the discourse. Drawing on environmental proxies, such as animal, seed, and pollen remains, this project uses data from \>309 sites [^index-1] (190 botanical and 466 faunal samples[^index-2]) and statistical/dimensionality reduction methods (CA, NCA, nMDS). Specific emphasis is placed on evaluating agricultural strategies during the shift from the Roman Empire to the politically fragmented landscape of early medieval Italy, to assess the role of political organization, economy, culture, and environment in the configuration of agricultural regimes and animal/plant husbandry selection. The integration of different sources is fundamental to casting new light on peasants' lifeways, which may be obscured in the textual records, privileging elite contexts and high-status transactions. The Early Middle Ages mark a period of fundamental change when different geographical regions (and potentially micro-regions) developed their own political and economic frameworks for agricultural production. Bioarchaeological evidence can help visualise the landscape in which these changes were taking place, as archive collections of samples are subjected to new analyses in a holistic context, through the database I have constructed. For example, one can analyse differences in diet and production between elite, religious, urban and rural sites, and conduct regional pattern analysis. Preliminary results show indeed higher degrees of regionalization in agricultural strategies during the EMA. My dissertation will contextualize these findings against textual sources to assess how people used the Italian agricultural landscape, and suggest which agents were responsible for changes. I argue that the discourse on Northern Italian/French early Medieval production has heavily influenced interpretations of the agrarian economies of the rest of the peninsula.

[^index-1]: Last update: February 2023.

[^index-2]: Pollen tbd.

# Database status

## Distribution map

::: {.content-hidden when-format="pdf"}
The map below (@fig-db-status-map) shows the distribution of the samples used for this project. Hover to the point of interest and click on the marker to see what data is available.

```{r}
#| echo: false
#| output: false

# Load libraries
library(sp)
library(rgdal)
library(leaflet)
library(leaflet.extras)
library(htmltools)
library(tidyverse)

# Get an Italy shapefile
#download.file(url = 'http://biogeo.ucdavis.edu/data/diva/adm/ITA_adm.zip', 
            #  destfile = 'italy.zip')
#unzip(zipfile = 'italy.zip')

italy <- readOGR('Italy_SHP/ITA_Peninsula.shp')
data_map <- read.csv("/Users/robertoragno/Desktop/University/Bari/Tesi PhD/GIS/MAIN_INDEX.csv", header=TRUE, sep=";")

# Create a palette that maps factor levels to colors
map_pal <- leaflet::colorFactor(palette = c("bot" = "#283618", 
                                           "bot_poll" = "#3e9b1c", 
                                           "bot_zoo" = "#bc4749",
                                           "bot_zoo_poll" = "goldenrod",
                                           "poll" = "steelblue",
                                           "zoo" = "#bc6c25",
                                           "zoo_poll" = "#f06c9b"
                                           ), 
                               domain = data_map$available_data)

italy_map <- leaflet(data=italy) %>%
  addProviderTiles(providers$CartoDB.Positron,  group = "Political") %>%
  addProviderTiles(providers$Esri.WorldPhysical, group = "Physical") %>%
  addPolygons(weight = 1, 
              smoothFactor = 0.5,
              opacity = 0.3, 
              fillOpacity = 0.4,
              fillColor = "#F9F5EB",
              color="#D7A86E"
              ) %>%
  addCircleMarkers(
    lng=data_map$x, lat=data_map$y,
    label = ~htmlEscape(data_map$site_name),
    color=map_pal(data_map$available_data),
    fillOpacity = 0.5,
    stroke = F,
    radius=4,
     popup = paste(
                   "<b>", data_map$site_name, "</b>",
                   "<hr style='border:2px solid green; color: solid green, border-radius:2px; margin-top:1.5px; margin-bottom:5px'>",
                   "<b>Site ID:</b>", data_map$site_code, "<br>",
                   "<b>Type:</b>", data_map$type_name, "<br>",
                   "<b>Chronology (c.):</b>", data_map$startcentury,
                   "-", data_map$endcentury, "<br>",
                   "<b>Data:</b>", data_map$available_data, "<br>",
                   "<br><b>Database records</b><br>",
                   "ID BOT:", data_map$bot, "<br>",
                   "ID ZOO:", data_map$zoo, "<br>",
                   "ID POLL:", data_map$poll
                           )
  ) %>% 
  addLegend(position = "bottomright",
            values = data_map$available_data, # data frame column for legend
            opacity = .7, # alpha of the legend
            pal = map_pal, # palette declared earlier
            title = "Data") %>%
  addResetMapButton() %>%
  addFullscreenControl() %>%
  addLayersControl(baseGroups = c("Political", "Physical"),
  options = layersControlOptions(collapsed = T))  %>%
  htmlwidgets::onRender("
    function(el, x) {
      var myMap = this;
      myMap.on('baselayerchange',
        function (e) {
          myMap.minimap.changeLayer(L.tileLayer.provider(e.name));
        })
    }")

```

```{r}
#| echo: false
#| label: fig-db-status-map
#| fig-cap: "**Legend**: `bot` = Archaeobotanical remains, `zoo` = Zooarchaeological remains, `poll` = Pollen remains. If the codes are combined, more than one type of data is available for the same context and chronology."

italy_map
```
:::

::: {.content-visible when-format="pdf"}
The map below shows the distribution of the samples used for this project.
:::

## Counts

```{r}
#| echo: false

# A recap with the database status through a bar chart 

# DATA TYPE
# To get the number of non NA entries, use colSums()
# We are only interested in columns bot, zoo, poll (cols 13:15)
db_status_recap.data <- colSums(!is.na(data_map[c(13:15)])) 
db_status_recap.data <- data.frame(Type = names(db_status_recap.data), Count = db_status_recap.data, row.names =NULL )

db_status_recap.data.plot <- ggplot(db_status_recap.data, aes(x=Type, y = Count)) +
  geom_bar(stat = "identity", width = .8, fill="steelblue") + 
  geom_text(aes(label=Count), vjust=3, size=5, color="white")+
  theme_minimal()

# TYPE OF SITES
db_status_recap.sitetype <- summary(as.factor(data_map$type_name))
db_status_recap.sitetype <- data.frame(Type = names(db_status_recap.sitetype), Count = db_status_recap.sitetype, row.names =NULL )

db_status_recap.sitetype.plot <- ggplot(db_status_recap.sitetype, aes(x=Count, y = Type)) +
  geom_bar(stat = "identity", width = .8, fill="steelblue") + 
  geom_text(aes(label=Count), hjust=-0.1, size=3.5, color="black")+
  theme_minimal()

```

The graphs below (@fig-db-status-counts) provide counts of the (a) sample types[^index-3] and (b) site types in the database.

[^index-3]: Pollen tbd.

```{r}
#| echo: false
#| layout: "[[100,100], [1]]"
#| label: fig-db-status-counts
#| fig-cap: "Database status"
#| fig-subcap: 
#|  - "Data type." 
#|  - "Site type."
#| fig-height: 6


db_status_recap.data.plot
db_status_recap.sitetype.plot
```
