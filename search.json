[
  {
    "objectID": "methods.html",
    "href": "methods.html",
    "title": "4  Methods",
    "section": "",
    "text": "Page under construction"
  },
  {
    "objectID": "methods.html#introduction",
    "href": "methods.html#introduction",
    "title": "4  Methods",
    "section": "4.1 Introduction",
    "text": "4.1 Introduction\nThis chapter presents the methodology employed to carry out this study. The first section discusses statistical computing programming languages such as R and Python. The second section introduces databases and their employment in archaeology, then outlines the construction of the database used for this research. GitHub as a hosting service for this research is discussed in section three. The fourth section describes the logic behind the choice of the temporal boundaries, the creation of chronologies and presents a possible solution to mitigate the problem of chronological fuzziness of samples."
  },
  {
    "objectID": "methods.html#statistical-computing",
    "href": "methods.html#statistical-computing",
    "title": "4  Methods",
    "section": "4.2 Statistical computing",
    "text": "4.2 Statistical computing\nStatistical computing, often referred to as computational statistics, is a branch of statistics that uses computational approaches to solving statistical problems. Traditionally, the term statistical computing places more emphasis on numerical methods, while computational statistics refer to topics such as resampling methods, exploratory data analysis, neural networks, etc. (Rizzo (2019)). Specifically, computational statistics deals with methods “unthinkable before the computer age” (Lauro (1996)). In Archaeology, mainly two programming languages are used today for exploring large sets of data: R and Python. Both programming languages can be used for statistical modeling, although R was designed explicitly for statistical computing and Python as an object-oriented language for more general purposes. Python is one of the most used and fastest-growing programming languages in the world, and its package number is extremely high compared to R. While R benefits from a strong academic community, Python relies on developers to add new packages almost continuously. R was used for the majority of this project due to its familiarity, while Python was used for certain algorithms that were easier to implement.\n\n\n\nLogos of R and Python\n\n\n\n4.2.1 The R programming language\nR, as described on the R-Project FAQs is a “system for statistical computation and graphics. It consists of a language plus a run-time environment with graphics, a debugger, access to certain system functions, and the ability to run programs stored in script files”. Increasingly popular for data scientists, R is based on S and provides its own IDE (the R GUI), although RStudio1 is the most popular IDE for computing the R language. For this project, RStudio was the standard IDE.\n\n4.2.1.1 R Packages\nIn addition to base R, several packages enhance its performances and offer more tools to users. The packages are distributed by the official CRAN repository, which counts more than 18,452 packages2.\n\n4.2.1.1.1 tidyverse\nThe tidyverse ecosystem (Wickham et al. (2019)) is a core set of packages for R, maintained by Hadley Wickham for importing, tidying, transforming and visualising data which includes packages such as—ggplot2, dplyr, tidyr, stringr, tibble, forcats, purr, readr.\n\n\n4.2.1.1.2 ggplot2\nggplot2 is the most common data visualisation package for R, included in the tidyverse environment. The package substitutes the R base graphics and allows visualisation of single and multiple components (Wickham (2016)).\n\n\n4.2.1.1.3 knitr\nThe knitr engine enables the integration of R with HTML, Markdown and LaTeX. The package allows reproducible research (Xie (2021)) and was used for generating dynamic reports and documentation for this thesis.\n\n\n4.2.1.1.4 vegan\nThe vegan package (Oksanen et al. (2022)) is designed for ordination methods, diversity analysis and multivariate analysis in ecology.\n\n\n\n\n4.2.2 The Python programming language\nPython is a popular high-level general-purpose programming language that supports object-oriented, procedural and functional programming. Several IDE support Python, including JupyterLab (open source), RStudio, PyCharm and Visual Studio Code. In recent years, many statistical packages have been developed to compete with R in the data science field. This project uses Python in addition to R as its environment offers well-designed and intuitive packages for some of the data-reduction methods used on the datasets.\n\n4.2.2.1 Python packages\nPython’s motto “batteries included” refers to its comprehensive standard library. However, over 390,000 packages are contained in the PyPi repository providing users with many options for coding. In particular, this project uses some data science libraries (set of packages) and packages listed below.\n\n4.2.2.1.1 Pandas\nPandas is the most used package for data handling, manipulation and analysis (Reback et al. (2022)).\n\n\n4.2.2.1.2 Matplotlib\nMatplotlib is Python’s standard data visualisation library (Hunter (2007)).\n\n\n4.2.2.1.3 Seaborn\nBased on Matplotlib, Seaborn is a data visualisation library that allows users to create more complex graphs (Waskom (2021)).\n\n\n4.2.2.1.4 Scikit-learn\nScikit-learn is the most comprehensive Python library for machine learning, including methods for classification, clustering, data reduction and regression (Pedregosa et al. (2011)).\n\n\n4.2.2.1.5 NumPy\nThe NumPy library is the main tool for array programming and it includes several functions for numerical analysis (Harris et al. (2020)).\n\n\n4.2.2.1.6 SciPy\nThe SciPy library provides tools for scientific computing (data integration, interpolation, optimization, linear algebra, etc.) and it works with NumPy multidimensional arrays (Virtanen et al. (2020))."
  },
  {
    "objectID": "methods.html#github-hosting-the-project",
    "href": "methods.html#github-hosting-the-project",
    "title": "4  Methods",
    "section": "4.3 GitHub: hosting the project",
    "text": "4.3 GitHub: hosting the project\n\n\n\n\n\n\nSection under construction\n\n\n\nThis section will include a general intro to GitHub and why I chose to host data there."
  },
  {
    "objectID": "methods.html#database",
    "href": "methods.html#database",
    "title": "4  Methods",
    "section": "4.4 Database",
    "text": "4.4 Database\n\n4.4.1 What is a database?\nDatabases are increasingly being used in archaeology to archive and collect data digitally. There are mainly two types of databases—relational and non-relational. A relational database is more appropriate for well-defined data structures which can be linked through a mutual attribute. It is built and maintained with Structured Query Language (SQL), which allows the user to interrogate the database through queries (Gattiglia (2018)). A SQL database consists of several tables containing information in columns (variables) and rows (entries). Each row is defined by an unique key. Examples of relational database management systems include—MySQL, PostgreSQL, MariaDB, Microsoft SQL Server and Oracle Database. A non-relational database (NoSQL) is advantageous in the case of unstructured data, as data is archived as a single document rather than in a table. This structure allows much more flexibility, although NoSQL databases can be harder to use by non-specialists. Among the NoSQL database management systems, MongoDB is the most widely used.\n\n\n4.4.2 Databases in archaeology\nDatabases are used in archaeology primarily for two reasons—data management and data sharing. Most excavations are now working with databases, where the information concerning each stratigraphic unit and finds is recorded. Databases can also be linked and interact with Geographical Information Systems (GIS), that allow researchers to work with a spatial component. In many cases, this data remains private, even after the publication of the excavation results, although increasingly more teams are also making their data available to the public. The growing popularity of open data has also created the need for standardisation. Since the 1970s, researchers started working on thesauri (Figuera (2018)), dictionaries and guides for the correct archival of archaeological information (e.g. pottery classes, context types, chronologies, etc.). A shared system of naming practices is essential for sharing, integrating and analysing data. Recently, more standardised databases and repositories are being created and openly published:\n\nArchaeological Data Service (ADS). A non-profit organisation, based at the University of York. The website provides a large repository of downloadable archaeological data (mostly from the British isles) (Richards (2021)).\nARIADNEplus, a Horizon 2020 project funded by the European Commission aiming to build an integrated european archaeological data structure. Over 2 million datasets are part of this project, with the original data still managed by the original creators (Niccolucci (2020)).\n\nMost of the archaeological databases are based on SQL, as the visual relationships between different data structures are easier to understand.\n\n\n4.4.3 Creating an Environmental Archaeology database\nAn integrated database with environmental archaeology data is still missing in Italy. A first step towards botanical data digitalisation has been the BRAIN project (Botanical Records of Archaeobotany Italian Network), a census of the Italian excavations that reported archaeobotanical data (Mercuri et al. (2015)). The website, although not providing raw data, has been useful to the bibliographical research for this project. For what concerns faunal remains, a database is missing, although a pilot project was started at the University of Siena by Boscato et al. (2007). The database was created using FileMaker Pro and was likely never published.\nFor the scope of this project, it was thus necessary to create a database that contained raw environmental data. The creation of a database for this research responded to the need of a systematic approach in storing environmental data in a common format and in a way that is convenient for querying, rather than merely archiving the information. The goal is to have data readily available for exploratory data analysis, in an automated process that does not require to adapt the query and manually wrangle data each time a new sample is added to the collection. This project uses MariaDB, a fast and stable fork of MySQL.\nThe database was structured with the creation of 21 tables. The table site_list is the core table, from which most of the other tables in the schema depend. The entries in the table are based on the chronology of a single sample. The chronology is defined both by the macroperiod3 and by the centuries, with two columns: startcentury and endcentury. If a context has been sampled more than once, there will be as many entries as many chronologies. If a context has been sampled both for seeds and bones, the sample IDs will be recorded on the same entry (if the chronologies match).\n\n\n\nContext\nSample #ID\n\n\n\n\nImola, villa Clelia, 6th c.\n15\n\n\nImola, villa Clelia, 10th-11th c.\n16\n\n\n\nSince the table is context based, each site has been provided with an unique ID, so that if the site has been sampled in different areas the database can be still queried using the site ID4. In addition to the reference to the samples table, the table site_list also contains references to child tables with information about: site type, geography, altitude, coordinates, and region. The samples are organized in three tables, depending on the type of remain that has to be recorded in the database:\n\nplant_remains\npollen_remains\nfaunal_remains\n\nEach entry in the samples tables contains information about chronology, sampling type and notes, reference to the publication, reference to the main site, and the raw data. The tables faunal_chrono_weights and plants_chrono_weights contain the automated calculation of the samples weights (refer to Section 4.5.1). The Figure 4.1 shows the schema with the complete list of tables in the database.\n\n\n\nFigure 4.1: Schema of the database, with the table site_list at the core.\n\n\nThe data was stored in the database after a thorough bibliographical research of the excavated sites (with a chronology pertaining to the 1st millennium CE) where environmental analyses have been undertaken. As in most of the cases the material was retrieved from physical publications, not digitised, the process of data entry was manual and could not be automatised. A list of the publication types where data was retrieved from can be visualised in Figure 4.2.\n\n\n\n\n\n\n\n\nFigure 4.2: Count of the publication types in the database."
  },
  {
    "objectID": "methods.html#sec-periodization",
    "href": "methods.html#sec-periodization",
    "title": "4  Methods",
    "section": "4.5 Periodization",
    "text": "4.5 Periodization\nSome of the statistics performed on the dataset have been based on sample periodization, from the Roman age to the Medieval age. The chronologies have been defined as follows:\n\n[R] Roman: from the 1st century BCE to the 2nd century CE.\n[LR] Late Roman: from the 3rd to the 5th century CE.\n[EMA] Early Middle Ages: from the 6th to the 10th century CE.\n[Ma] Middle Ages: from the 11th century CE onwards.\n\nIn the database, the tables faunal_chronologies and plants_chronologies connect each bioarchaeological sample to another table with the identification numbers for the periods (e.g. Sample 1 = ID 1). If a sample has a chronology ranging between two periods, two separate entries will be recorded on the database (e.g. Sample 1 – 2nd to 3rd c. CE = Periods: Roman, Late Roman) with the result of the sample being repeated in both periods.\n\n\n\nPeriodization schema.\n\n\n\n4.5.1 Chronological fuzziness\nOne of the methodological issues affecting this project is that of chronological fuzziness. Dating plant and animal remains using radiocarbon is very rare, at least in the samples recorded in the database. Most of these samples are dated using ceramics, and chronologies can range between one century or several. Taking this into account, I weighted each sample as follows: \\[ W=\\frac{1}{(C_{end}-C_{start}+1)} \\] Where:\n\n\\(C\\_{end}\\) is the terminus ante quem.\n\\(C\\_{start}\\) is the terminus post quem.\n1 has been summed to the denominator to avoid 0 values.\n\nThe imported tables already contain a column of weights, as this operation has been performed on the database prior the export. A diachronic table of means for both datasets has been generated using the functions:\n\nzooarch_tables (custom)\nBot_mean_table (custom)\nBot_mean_fun (custom)\nweighted.median (from the package spatstat)\n\nThe weight can be used for weighted means and medians, with samples with larger chronologies (hence less precise/fuzzy) weighting less. This method provides each sample with a weight proportional to the length of its chronology so that lower weight values have a smaller impact on the computations."
  },
  {
    "objectID": "methods.html#multivariate-statistics",
    "href": "methods.html#multivariate-statistics",
    "title": "4  Methods",
    "section": "4.6 Multivariate statistics",
    "text": "4.6 Multivariate statistics\n\n\n\n\n\n\nSection in progress\n\n\n\n\nSomewhere after this section talk about R and Python. Or maybe before Section 4.5 since it already talks about functions?\n\n\n\nThis research uses multivariate analysis to explore possible relationships within the sets of environmental data under investigation. Univariate analyses can be easily plotted and visualized with bar charts, histograms and density curves. A scatterplot (or scattergram) shows the relationship between two variables by plotting their values on the axes of a diagram using Cartesian coordinates. This relationship can also be mathematically measured by calculating a distance between two points in the graph. However, the relationship between more than two variables is much harder to read on a scatterplot, as it would require as many axes as the number of variables. If our analysis is exploratory, we might not know yet where to look for correlations. A possible solution is analysing each combination of two variables in the dataset and measure their correlation. This would require too much computation time if the dataset had a large number of variables, that is to say if we are dealing with big data. In addition, we would only gather information about the relationship between two variables, when there might be another factor influencing a trend or phenomenon. Multivariate statistics has a wide range of applications, including grouping and multidimensional scaling, as well as in machine learning and predictive analysis (Fletcher and Lock (2005)). In this research, multivariate methods have been applied both to the botanical and faunal datasets, mainly with the objective of reducing the dimensionality of data to assess which variables are the main drivers of change in the datasets.\n\n4.6.1 Dimensionality reduction algorithms\nDimensionality reduction techniques transform datasets with a large number of dimensions (variables) into a new dataset with a lower number of variables, with the attempt of maintaining the geometry as close as possible to the original dataset. The new reduced set of variables can be grouped so to observe differences between groups.\nSupervised vs unsupervised approaches: Two different types of Machine Learning approaches\nCA\nPCA: unsupervised. optimizes the loss of variance while trying to preserve the global structure: finding a space in which dimensions can be reduced giving up the least information. PCA projects the matrix into a linear space of lower dimensionality.\nnMDS\nNCA (Goldberger et al. (2004)): supervised. optimizes overall classification accuracy. Algo similar to K-Nearest neighbors. It can be used for dimensionality reduction, but mostly it is for distance metric learning. NCA takes PCA this a step further and clusters data based on the results of dimensionality reduction on the matrix. It uses the component variance to estimate the number of clusters (kind of like an automatic, standardized k-means algorithm)."
  },
  {
    "objectID": "methods.html#archaeobotany",
    "href": "methods.html#archaeobotany",
    "title": "4  Methods",
    "section": "4.7 Archaeobotany",
    "text": "4.7 Archaeobotany\n\n\n\n\n\n\nSection in progress\n\n\n\nIntroduce the topic\n\n\n\n4.7.1 Methodological issues\n\n\n\n\n\n\nSection in progress\n\n\n\nIssues: problems with the data and general problems in sampling\nBIASES: Talk about the biases and dataset problems here or do it in the Materials chapter?\n\n\nThe data collection process did not present major problems in taxa comparability, since the names of plant were matching. In some cases, it was only possible for the archaeobotanist to specify the name of the species (e.g. Avena sp.), or it was not possible to properly identify the taxa. In the latter case, I reported all the names that can possibly identify the seed (e.g. Triticum aestivum/durum). Quantifications on the archaeobotanical dataset were affected by several biases. The samples in the database have been collected using different variations of visual strategies. Visual sampling occurs when archaeologists can visually see or expect macroremains in the feature they are excavating. Common features from which samples are usually collected include—pits, hearths, filled anforae, etc. But “how can one argue that the contents of a pit reflect activities involving food specific to that context, if one has not examined samples from floor deposits into which the pit was dug, or the deposits overlying it?” (Pearsall (2015, p. 75)). Lennstrom and Hastorf (1995) lament “feature biases” in many archaeological excavations, as paleobotanists are often called after archaeologists have already recovered materials from specific site features. The authors call for a general misconception in the goal of archaeobotany—to collect as many macroremains as possible. This strategy is, in fact, not very informative about the relationships between plant remains and stratigraphic units, and the general deposition patterns in the site. For instance, Jones et al. (1986) were able to reconstruct the functions of structures and the methods of crop storage at Assiros, northern Greece, through a thorough extensive sampling. Pearsall (2015, p. 74) reccommends a “blanket sampling” strategy, which consists in collecting samples for flotation from each stratigraphical unit. The advantages of blanket sampling are manifold:\n\nIf in theory sampling from strategical features (e.g. hearths) maximizes the chances of recovering more macrobotanical remains, in practice this is not always the case. For instance, if a hearth was used on a regular basis, it could possibly have been cleaned of ashes frequently, and the excavator might have more luck sampling around it.\nIncluding the collection of samples from each layer in the excavation leads an uniform and standardised procedure, reducing the variation across samples.\nBlanket sampling allows an easier reconstruction of deposition patterns and of stratigraphic units relations as stated above. For instance, one can analyse differences in macroremains densities across samples.\n\nWhile archaeobotanists have advocated for more specific sampling strategies for over 40 years, none of the Italian excavations in this dataset applied blanket sampling, and sampling from features is still the most common practice.\n\n\n4.7.2 Quantifications\n\n4.7.2.1 Ubiquity\nUbiquity, or presence analysis, is a popular approach in archaeobotanical quantitative analysis. The method is straightforward—the number of sites/contexts where a plant is present is divided by the total number of sites/contexts under examination. If, for instance, an olive pit is present in 3 sites out of 10, the ubiquity for the olive will be 30%. The formula for the calculation is at follows:\n\\[\nU_x = (\\frac{N_p}{N_{tot}}) \\cdot 100\n\\] where \\(N_p\\) is the number of presences, and \\(N_{tot}\\) is the total number of contexts. The result can be multiplied by 100 to obtain a score in %.\nThis approach has both advantages and drawbacks. Presence analysis minimizes the impact of outliers (overrepresented plant species) on calculations (Wright (2010), 51-52), but the relative importance of a plant in a particular context is lost. It is also important to keep in mind that taxa richness is influenced by factors including sample size, deposition and preservation modes, and sampling strategies (e.g. sieving methodologies) (Pearsall (2015), 161-2).\n\nWrite about sample size problems and include a graph\nWrite about deposition and preservation\nWrite about sampling strategies\nWrite about the problems of this dataset that led to the choice of ubiquity as parameter\n\nUbiquity is the best option to immediately read the Italian peninsular botanical dataset. The variability in the seeds/fruits samples is too high, with different species being outliers in different sites. A likely reason for this is probably the poor sampling quality, usually occurring after an agglomerate of seeds is found during excavation. Normally, agglomerates are found in specific storage places or processing areas (e.g. wine/olive processing quarters), skewing the distribution of the curve. Ubiquity overcomes this issue, as it provides a score based on the percentage of presences of a plant species in the samples considered.\nIn addition to the general calculation of the diachronic ubiquity in the entire peninsula, it is also important to look for regional differences in the archaeobotanical dataset. To do so, I created an R function to subset data related to Northern, Central and Southern Italian regions. For a clearer reading of the plot, I divided the plants into–Cereals, Pulses and Fruits/Nuts. The results are in Chapter 5.\n\n\n\n4.7.3 Diversity\n\n\n\n\n\n\nNotes:\n\n\n\nIntroduce the concept of diversity. Why is it useful?\n\n\nSpecies richness (\\(S\\)) is the number of species found within a community or ecosystem. The boundaries of the region are defined by the researcher. While ecologists use sampling or census to obtain the richness value, archaeobotanists can only rely on sampling, counting the presence of species in the area under investigation (Moore (2013)). Species diversity is a measurement of species richness combined with species evenness, meaning it takes into account not only how many species are present but also how evenly distributed the numbers of each species are.\nThere are different ways to calculate species diversity…\nShannon-W\n\n4.7.3.1 Richness and diversity in the Italian macroregions\n\n\n\n\n\n\nSection in progress\n\n\n\n\n\n\n\n\n4.7.3.2 Cereals regionality: testing the results\n\n\n\n\n\n\nSection in progress\n\n\n\nDescribe the PERMANOVA etc\n\n\n\n\n4.7.3.3 Network Analysis of cereals in EMA sites\n\n\n\n\n\n\nSection in progress"
  },
  {
    "objectID": "methods.html#zooarchaeology",
    "href": "methods.html#zooarchaeology",
    "title": "4  Methods",
    "section": "4.8 Zooarchaeology",
    "text": "4.8 Zooarchaeology\n\n\n\n\n\n\nSection in progress\n\n\n\n\n\n\n\n\n\n\nBoscato, P., Fronza, V., Salvadori, F., 2007. Proposta di un database per i reperti faunistici. In: Fiore, I., Malerba, G., Chilardi, S. (Eds.), Atti Del 3 Convegno Nazionale Di Archeozoologia. Siracusa 3-5 Novembre 2000. Istituto Poligrafico e Zecca dello Stato, Roma, pp. 1–14.\n\n\nFiguera, M., 2018. Database management e dati archeologici: standardizzazione e applicazione della logica fuzzy alla gestione delle fonti e delle attribuzioni tipologiche. Archeologia e Calcolatori 29, 143–160.\n\n\nFletcher, M., Lock, G.R., 2005. Digging numbers: Elementary statistics for archaeologists, 2nd ed. ed, Monograph (Oxford University School of Archaeology). Oxford University Committee for Archaeology, Oxford : Oakville, CT.\n\n\nGattiglia, G., 2018. Databases in Archaeology. In: López Varela, S.L. (Ed.), The Encyclopedia of Archaeological Sciences. John Wiley & Sons, Inc., Hoboken, NJ, USA, pp. 1–4.\n\n\nGoldberger, J., Hinton, G.E., Roweis, S., Salakhutdinov, R.R., 2004. Neighbourhood components analysis. Advances in neural information processing systems 17.\n\n\nHarris, C.R., Millman, K.J., van der Walt, S.J., Gommers, R., Virtanen, P., Cournapeau, D., Wieser, E., Taylor, J., Berg, S., Smith, N.J., Kern, R., Picus, M., Hoyer, S., van Kerkwijk, M.H., Brett, M., Haldane, A., del Río, J.F., Wiebe, M., Peterson, P., Gérard-Marchant, P., Sheppard, K., Reddy, T., Weckesser, W., Abbasi, H., Gohlke, C., Oliphant, T.E., 2020. Array programming with NumPy. Nature 585, 357–362.\n\n\nHunter, J.D., 2007. Matplotlib: A 2D graphics environment. Computing in science & engineering 9, 90–95.\n\n\nJones, G., Wardle, K., Halstead, P., Wardle, D., 1986. Crop Storage at Assiros. Scientific American 254, 96–103.\n\n\nLauro, C., 1996. Computational statistics or statistical computing, is that the question? Computational Statistics & Data Analysis, Classification 23, 191–193.\n\n\nLennstrom, H.A., Hastorf, C.A., 1995. Interpretation in context: Sampling and analysis in paleoethnobotany. American Antiquity 60, 701–721.\n\n\nMercuri, A.M., Allevato, E., Arobba, D., Bandini Mazzanti, M., Bosi, G., Caramiello, R., Castiglioni, E., Carra, M.L., Celant, A., Costantini, L., Di Pasquale, G., Fiorentino, G., Florenzano, A., Guido, M., Marchesini, M., Mariotti Lippi, M., Marvelli, S., Miola, A., Montanari, C., Nisbet, R., Peña-Chocarro, L., Perego, R., Ravazzi, C., Rottoli, M., Sadori, L., Ucchesu, M., Rinaldi, R., 2015. Pollen and macroremains from Holocene archaeological sites: A dataset for the understanding of the bio-cultural diversity of the Italian landscape. Review of Palaeobotany and Palynology 218, 250–266.\n\n\nMoore, J.C., 2013. Diversity, taxonomic versus functional. In: Encyclopedia of Biodiversity. Elsevier, pp. 648–656.\n\n\nNiccolucci, F., 2020. ARIADNEplus: L’avventura continua. DigItalia 2, 88–95.\n\n\nOksanen, J., Simpson, G.L., Blanchet, F.G., Kindt, R., Legendre, P., Minchin, P.R., O’Hara, R.B., Solymos, P., Stevens, M.H.H., Szoecs, E., Wagner, H., Barbour, M., Bedward, M., Bolker, B., Borcard, D., Carvalho, G., Chirico, M., Caceres, M.D., Durand, S., Evangelista, H.B.A., FitzJohn, R., Friendly, M., Furneaux, B., Hannigan, G., Hill, M.O., Lahti, L., McGlinn, D., Ouellette, M.-H., Cunha, E.R., Smith, T., Stier, A., Braak, C.J.F.T., Weedon, J., 2022. Vegan: Community ecology package.\n\n\nPearsall, D.M., 2015. Paleoethnobotany: A handbook of procedures, Third edition. ed. Left Coast Press Inc, Walnut Creek, California.\n\n\nPedregosa, F., Varoquaux, G., Gramfort, A., Michel, V., Thirion, B., Grisel, O., Blondel, M., Prettenhofer, P., Weiss, R., Dubourg, V., Vanderplas, J., Passos, A., Cournapeau, D., Brucher, M., Perrot, M., Duchesnay, É., 2011. Scikit-learn: Machine Learning in Python. Journal of Machine Learning Research 12, 2825–2830.\n\n\nReback, J., jbrockmendel, McKinney, W., Bossche, J.V. den, Roeschke, M., Augspurger, T., Hawkins, S., Cloud, P., gfyoung, Sinhrks, Hoefler, P., Klein, A., Petersen, T., Tratner, J., She, C., Ayd, W., Naveh, S., Darbyshire, J.H.M., Shadrach, R., Garcia, M., Schendel, J., Hayden, A., Saxton, D., Gorelli, M.E., Li, F., Wörtwein, T., Zeitlin, M., Jancauskas, V., McMaster, A., Li, T., 2022. Pandas-dev/pandas: Pandas 1.4.3.\n\n\nRichards, J.D., 2021. Archiving Archaeological Data in the United Kingdom. Internet Archaeology 58.\n\n\nRizzo, M.L., 2019. Statistical Computing with R, Second. ed. Chapman and Hall/CRC, New York.\n\n\nVirtanen, P., Gommers, R., Oliphant, T.E., Haberland, M., Reddy, T., Cournapeau, D., Burovski, E., Peterson, P., Weckesser, W., Bright, J., 2020. SciPy 1.0: Fundamental algorithms for scientific computing in Python. Nature methods 17, 261–272.\n\n\nWaskom, M.L., 2021. Seaborn: Statistical data visualization. Journal of Open Source Software 6, 3021.\n\n\nWickham, H., 2016. Programming with Ggplot2. In: Wickham, H. (Ed.), Ggplot2: Elegant Graphics for Data Analysis, Use R! Springer International Publishing, Cham, pp. 241–253.\n\n\nWickham, H., Averick, M., Bryan, J., Chang, W., McGowan, L.D., François, R., Grolemund, G., Hayes, A., Henry, L., Hester, J., Kuhn, M., Pedersen, T.L., Miller, E., Bache, S.M., Müller, K., Ooms, J., Robinson, D., Seidel, D.P., Spinu, V., Takahashi, K., Vaughan, D., Wilke, C., Woo, K., Yutani, H., 2019. Welcome to the tidyverse 4, 1686.\n\n\nWright, P.J., 2010. Methodological Issues in Paleoethnobotany: A consideration of Issues, Methods, and Cases. In: VanDerwarker, A.M., Peres, T.M. (Eds.), Integrating Zooarchaeology and Paleoethnobotany: A Consideration of Issues, Methods, and Cases. Springer New York, New York, NY, pp. 37–64.\n\n\nXie, Y., 2021. Knitr: A general-purpose package for dynamic report generation in r."
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Long-term Dynamics and Peasant Autonomy in the Italian Countryside",
    "section": "",
    "text": "AFFILIATION\nEMAIL"
  },
  {
    "objectID": "index.html#distribution-map",
    "href": "index.html#distribution-map",
    "title": "Long-term Dynamics and Peasant Autonomy in the Italian Countryside",
    "section": "Distribution map",
    "text": "Distribution map\nThe map below (Figure 1.1) shows the distribution of the samples used for this project. Hover to the point of interest and click on the marker to see what data is available.\n\n\n\n\n\n\n\n\nFigure 1.1: Legend: bot = Archaeobotanical remains, zoo = Zooarchaeological remains, poll = Pollen remains. If the codes are combined, more than one type of data is available for the same context and chronology."
  },
  {
    "objectID": "index.html#counts",
    "href": "index.html#counts",
    "title": "Long-term Dynamics and Peasant Autonomy in the Italian Countryside",
    "section": "Counts",
    "text": "Counts\n\n\n\nThe graphs below (Figure 1.2) provide counts of the (a) sample types3 and (b) site types in the database.\n\n\n\n\n\n\n\n(a) Data type.\n\n\n\n\n\n\n\n(b) Site type.\n\n\n\n\nFigure 1.2: Database status"
  },
  {
    "objectID": "materials.html",
    "href": "materials.html",
    "title": "3  Materials",
    "section": "",
    "text": "Page under construction\n\n\n\nThis page will probably be merged with “Methods”"
  },
  {
    "objectID": "materials.html#introduction",
    "href": "materials.html#introduction",
    "title": "3  Materials",
    "section": "3.1 Introduction",
    "text": "3.1 Introduction\n\n\n\n\n\n\nSection in progress"
  },
  {
    "objectID": "materials.html#archaeobotany",
    "href": "materials.html#archaeobotany",
    "title": "3  Materials",
    "section": "3.2 Archaeobotany",
    "text": "3.2 Archaeobotany\n\n\n\n\n\n\nSection in progress\n\n\n\n\n\n\nShould the maps be here?\n\n3.2.1 Carpology\n\n3.2.1.1 Database storing procedures\n\n\n\n3.2.2 Palinology\n\n3.2.2.1 Database storing procedures"
  },
  {
    "objectID": "materials.html#zooarchaeology",
    "href": "materials.html#zooarchaeology",
    "title": "3  Materials",
    "section": "3.3 Zooarchaeology",
    "text": "3.3 Zooarchaeology\n\n\n\n\n\n\nSection in progress\n\n\n\n\n\n\nShould the maps be here?\n\n3.3.1 Database storing procedures"
  },
  {
    "objectID": "archaeobotany.html",
    "href": "archaeobotany.html",
    "title": "5  Archaeobotany",
    "section": "",
    "text": "In this chapter, I will present the macrobotanical data from X case studies used to carry on this research [reference to the Materials chapter], along with the quantifications performed on the absolute counts. The data will be first presented temporally, and a discussion of the diachronic trends will follow at the end of the chapter."
  },
  {
    "objectID": "archaeobotany.html#case-studies",
    "href": "archaeobotany.html#case-studies",
    "title": "5  Archaeobotany",
    "section": "5.1 Case studies",
    "text": "5.1 Case studies\nThe following map shows the sites under investigation, divided by chronology. Please select the desired chronology (or chronologies) from the legend on the right.\n\n\n\n\n\n\n\nLegend: R = Roman, LR = Late Roman, EMA = Early Middle Ages, Ma = 11th c. onwards"
  },
  {
    "objectID": "archaeobotany.html#ubiquity",
    "href": "archaeobotany.html#ubiquity",
    "title": "5  Archaeobotany",
    "section": "5.2 Ubiquity",
    "text": "5.2 Ubiquity\nIn Chapter 4 ubiquity has been described as the best way to present the archaeobotanical remains from the Italian peninsula, given the numerous biases in the samples. The heatmap below (Figure 5.1) provides a good overview of the temporal trends of presence of cereals, legumes, fruits and nuts in the entire area under examination.\n\n\n\n\n\nShow the code\n# Load the libraries\n# Note: these libraries are used for the data visualizations in this page.\nlibrary(RColorBrewer)\nlibrary(reshape2)\nlibrary(ggplot2)\nlibrary(hrbrthemes)\nlibrary(plotly)\nlibrary(patchwork)\n\n## UBIQUITY\n\n## Creating a dataframe that contains the ubiquity of each century under examination. \nUbiquity_table <- data.frame(\n  \"I BCE\" = archaeobotany_tables(plants_export, -1)$Ubiquity_exp,  \n  \"I CE\" = archaeobotany_tables(plants_export, 1)$Ubiquity_exp,\n  \"II CE\" = archaeobotany_tables(plants_export, 2)$Ubiquity_exp,\n  \"III CE\" = archaeobotany_tables(plants_export, 3)$Ubiquity_exp,\n  \"IV CE\" = archaeobotany_tables(plants_export, 4)$Ubiquity_exp,\n  \"V CE\" = archaeobotany_tables(plants_export, 5)$Ubiquity_exp,\n  \"VI CE\" = archaeobotany_tables(plants_export, 6)$Ubiquity_exp,\n  \"VII CE\" = archaeobotany_tables(plants_export, 7)$Ubiquity_exp,\n  \"VIII CE\" = archaeobotany_tables(plants_export, 8)$Ubiquity_exp,\n  \"IX CE\" = archaeobotany_tables(plants_export, 9)$Ubiquity_exp,\n  \"X CE\" = archaeobotany_tables(plants_export, 10)$Ubiquity_exp,\n  \"XI CE\" = archaeobotany_tables(plants_export, 11)$Ubiquity_exp\n  )\n\n# Transform the ubiquity table into a matrix\nUbiquity_mat <- as.matrix(Ubiquity_table) \n\n# Rename the centuries\ncolnames(Ubiquity_mat) <- c(\"1st c. BCE\", \"1st c. CE\", \"2nd c. CE\",\n                            \"3rd c. CE\", \"4th c. CE\", \"5th c. CE\",\n                            \"6th c. CE\", \"7th c. CE\", \"8th c. CE\",\n                            \"9th c. CE\", \"10th c. CE\", \"11th c. CE\") \n\n# The data has to be molten to use it with ggplot2\n# (package: reshape2)\nUbiquity_melt <- melt(Ubiquity_mat)\n\n# Let's now rename the columns \ncolnames(Ubiquity_melt) <- c(\"Taxon\", \"Century\", \"Ubiquity\")\n\n# Add a column for the text tooltip\nUbiquity_melt <- Ubiquity_melt %>%\n  mutate(text = paste0(\"Taxon: \", Taxon, \"\\n\", \"Century: \", Century, \"\\n\", \"Value: \",round(Ubiquity,2)))\n\n# Create the heatmap with ggplot2\nUbiquity_HM <- ggplot(Ubiquity_melt, aes(Century, Taxon, fill=Ubiquity, text=text)) + \n  geom_tile(colour=\"white\") +\n  scale_alpha(range=c(0,1)) +\n  scale_x_discrete(\"\", expand = c(0, 0)) + \n  scale_y_discrete(\"\", expand = c(0, 0)) + \n  theme_grey(base_size = 9) + \n  theme(legend.position = \"right\",\n        axis.ticks = element_blank(), \n        axis.text.x = element_text(angle = 90, hjust = 0)\n        ) +\n  theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank())+\n  labs(\n    title=\"Ubiquity\",\n    subtitle=\"Diachronical heatmap of recorded plant species\"\n  ) +\n  scale_fill_gradient(low = \"white\", high = \"black\")\n\n\n\n\n\n\n\nFigure 5.1: Diachronical heatmap of recorded plant species"
  },
  {
    "objectID": "literature_review.html",
    "href": "literature_review.html",
    "title": "2  Literature Review",
    "section": "",
    "text": "Page under construction"
  },
  {
    "objectID": "literature_review.html#introduction",
    "href": "literature_review.html#introduction",
    "title": "2  Literature Review",
    "section": "2.1 Introduction",
    "text": "2.1 Introduction"
  },
  {
    "objectID": "literature_review.html#continuity-vs-rupture",
    "href": "literature_review.html#continuity-vs-rupture",
    "title": "2  Literature Review",
    "section": "2.2 Continuity vs rupture",
    "text": "2.2 Continuity vs rupture"
  },
  {
    "objectID": "literature_review.html#environmental-archaeology",
    "href": "literature_review.html#environmental-archaeology",
    "title": "2  Literature Review",
    "section": "2.3 Environmental archaeology",
    "text": "2.3 Environmental archaeology\nMaybe move the processual arch. part somewhere here or create a general ‘science in arch’ section\n\n2.3.1 Archaeobotany\nName origin: Archaeobotany, paleobotany, paleoethnobotany…\n\n\n2.3.2 Zooarchaeology\nClassical intro with name zooarchaeology vs archaeozoology"
  },
  {
    "objectID": "literature_review.html#landscape-studies",
    "href": "literature_review.html#landscape-studies",
    "title": "2  Literature Review",
    "section": "2.4 Landscape studies",
    "text": "2.4 Landscape studies"
  },
  {
    "objectID": "literature_review.html#diet-studies",
    "href": "literature_review.html#diet-studies",
    "title": "2  Literature Review",
    "section": "2.5 Diet studies",
    "text": "2.5 Diet studies"
  },
  {
    "objectID": "literature_review.html#big-data-in-archaeology",
    "href": "literature_review.html#big-data-in-archaeology",
    "title": "2  Literature Review",
    "section": "2.6 Big data in archaeology",
    "text": "2.6 Big data in archaeology"
  },
  {
    "objectID": "literature_review.html#statistical-analysis-in-archaeology",
    "href": "literature_review.html#statistical-analysis-in-archaeology",
    "title": "2  Literature Review",
    "section": "2.7 Statistical analysis in archaeology",
    "text": "2.7 Statistical analysis in archaeology\nGeneral introduction (Shennan?)\nIn archaeology, multivariate statistics has been applied since the mid-60s, when the spread of computers and statistical packages made these methods more easily applicable. The growing popularity of computational archaeology in this period also owes a great debt to the New Archaeology movement (or Processual archaeology). New Archaeology emphasized the application of rigorous scientific analysis at the expense of the cultural historical approach which focused on artifacts cataloging based on ethnic grouping (Binford and Binford (1968)).\nInclude Baxter and Drennan"
  },
  {
    "objectID": "literature_review.html#conclusions",
    "href": "literature_review.html#conclusions",
    "title": "2  Literature Review",
    "section": "2.8 Conclusions",
    "text": "2.8 Conclusions\n\n\n\n\nBinford, S.R., Binford, L., 1968. New Perspectives in Archaeology. Aldline Press, Chicago."
  },
  {
    "objectID": "zooarchaeology.html",
    "href": "zooarchaeology.html",
    "title": "6  Zooarchaeology",
    "section": "",
    "text": "Page under construction"
  },
  {
    "objectID": "zooarchaeology.html#case-studies",
    "href": "zooarchaeology.html#case-studies",
    "title": "6  Zooarchaeology",
    "section": "6.1 Case studies",
    "text": "6.1 Case studies\nThe following map shows the sites under investigation, divided by chronology. Please select the desired chronology (or chronologies) from the legend on the right.\n\n\n\n\n\n\n\nLegend: R = Roman, LR = Late Roman, EMA = Early Middle Ages, Ma = 11th c. onwards"
  },
  {
    "objectID": "discussion.html",
    "href": "discussion.html",
    "title": "7  Discussion",
    "section": "",
    "text": "Page under construction"
  },
  {
    "objectID": "conclusions.html",
    "href": "conclusions.html",
    "title": "8  Conclusions",
    "section": "",
    "text": "Page to be added"
  },
  {
    "objectID": "references.html",
    "href": "references.html",
    "title": "References",
    "section": "",
    "text": "Binford, S.R., Binford, L., 1968. New Perspectives in\nArchaeology. Aldline Press,\nChicago.\n\n\nBoscato, P., Fronza, V., Salvadori, F., 2007. Proposta di un database\nper i reperti faunistici. In: Fiore, I., Malerba, G., Chilardi, S.\n(Eds.), Atti Del 3 Convegno Nazionale Di\nArcheozoologia. Siracusa 3-5\nNovembre 2000. Istituto Poligrafico e Zecca dello\nStato, Roma, pp. 1–14.\n\n\nFiguera, M., 2018. Database management e dati archeologici:\nstandardizzazione e applicazione della logica fuzzy alla gestione delle\nfonti e delle attribuzioni tipologiche. Archeologia e Calcolatori\n29, 143–160.\n\n\nFletcher, M., Lock, G.R., 2005. Digging numbers: Elementary statistics\nfor archaeologists, 2nd ed. ed, Monograph (Oxford University\nSchool of Archaeology). Oxford University\nCommittee for Archaeology, Oxford : Oakville, CT.\n\n\nGattiglia, G., 2018. Databases in\nArchaeology. In: López Varela, S.L. (Ed.), The\nEncyclopedia of Archaeological Sciences.\nJohn Wiley & Sons, Inc., Hoboken, NJ, USA,\npp. 1–4.\n\n\nGoldberger, J., Hinton, G.E., Roweis, S., Salakhutdinov, R.R., 2004.\nNeighbourhood components analysis. Advances in neural information\nprocessing systems 17.\n\n\nHarris, C.R., Millman, K.J., van der Walt, S.J., Gommers, R., Virtanen,\nP., Cournapeau, D., Wieser, E., Taylor, J., Berg, S., Smith, N.J., Kern,\nR., Picus, M., Hoyer, S., van Kerkwijk, M.H., Brett, M., Haldane, A.,\ndel Río, J.F., Wiebe, M., Peterson, P., Gérard-Marchant, P., Sheppard,\nK., Reddy, T., Weckesser, W., Abbasi, H., Gohlke, C., Oliphant, T.E.,\n2020. Array\nprogramming with NumPy. Nature 585, 357–362.\n\n\nHunter, J.D., 2007. Matplotlib: A 2D graphics environment.\nComputing in science & engineering 9, 90–95.\n\n\nJones, G., Wardle, K., Halstead, P., Wardle, D., 1986. Crop\nStorage at Assiros. Scientific American\n254, 96–103.\n\n\nLauro, C., 1996. Computational\nstatistics or statistical computing, is that the question?\nComputational Statistics & Data Analysis, Classification 23,\n191–193.\n\n\nLennstrom, H.A., Hastorf, C.A., 1995. Interpretation in context:\nSampling and analysis in paleoethnobotany. American Antiquity 60,\n701–721.\n\n\nMercuri, A.M., Allevato, E., Arobba, D., Bandini Mazzanti, M., Bosi, G.,\nCaramiello, R., Castiglioni, E., Carra, M.L., Celant, A., Costantini,\nL., Di Pasquale, G., Fiorentino, G., Florenzano, A., Guido, M.,\nMarchesini, M., Mariotti Lippi, M., Marvelli, S., Miola, A., Montanari,\nC., Nisbet, R., Peña-Chocarro, L., Perego, R., Ravazzi, C., Rottoli, M.,\nSadori, L., Ucchesu, M., Rinaldi, R., 2015. Pollen and macroremains from\nHolocene archaeological sites: A dataset for\nthe understanding of the bio-cultural diversity of the\nItalian landscape. Review of Palaeobotany and Palynology\n218, 250–266.\n\n\nMoore, J.C., 2013. Diversity,\ntaxonomic versus functional. In: Encyclopedia of Biodiversity.\nElsevier, pp. 648–656.\n\n\nNiccolucci, F., 2020. ARIADNEplus: L’avventura\ncontinua. DigItalia 2, 88–95.\n\n\nOksanen, J., Simpson, G.L., Blanchet, F.G., Kindt, R., Legendre, P.,\nMinchin, P.R., O’Hara, R.B., Solymos, P., Stevens, M.H.H., Szoecs, E.,\nWagner, H., Barbour, M., Bedward, M., Bolker, B., Borcard, D., Carvalho,\nG., Chirico, M., Caceres, M.D., Durand, S., Evangelista, H.B.A.,\nFitzJohn, R., Friendly, M., Furneaux, B., Hannigan, G., Hill, M.O.,\nLahti, L., McGlinn, D., Ouellette, M.-H., Cunha, E.R., Smith, T., Stier,\nA., Braak, C.J.F.T., Weedon, J., 2022. Vegan: Community ecology\npackage.\n\n\nPearsall, D.M., 2015. Paleoethnobotany: A handbook of procedures, Third\nedition. ed. Left Coast Press Inc, Walnut Creek,\nCalifornia.\n\n\nPedregosa, F., Varoquaux, G., Gramfort, A., Michel, V., Thirion, B.,\nGrisel, O., Blondel, M., Prettenhofer, P., Weiss, R., Dubourg, V.,\nVanderplas, J., Passos, A., Cournapeau, D., Brucher, M., Perrot, M.,\nDuchesnay, É., 2011. Scikit-learn: Machine Learning in\nPython. Journal of Machine Learning Research 12, 2825–2830.\n\n\nReback, J., jbrockmendel, McKinney, W., Bossche, J.V. den, Roeschke, M.,\nAugspurger, T., Hawkins, S., Cloud, P., gfyoung, Sinhrks, Hoefler, P.,\nKlein, A., Petersen, T., Tratner, J., She, C., Ayd, W., Naveh, S.,\nDarbyshire, J.H.M., Shadrach, R., Garcia, M., Schendel, J., Hayden, A.,\nSaxton, D., Gorelli, M.E., Li, F., Wörtwein, T., Zeitlin, M.,\nJancauskas, V., McMaster, A., Li, T., 2022. Pandas-dev/pandas:\nPandas 1.4.3.\n\n\nRichards, J.D., 2021. Archiving Archaeological Data in the\nUnited Kingdom. Internet Archaeology 58.\n\n\nRizzo, M.L., 2019. Statistical\nComputing with R, Second. ed.\nChapman and Hall/CRC, New York.\n\n\nVirtanen, P., Gommers, R., Oliphant, T.E., Haberland, M., Reddy, T.,\nCournapeau, D., Burovski, E., Peterson, P., Weckesser, W., Bright, J.,\n2020. SciPy 1.0: Fundamental algorithms for scientific\ncomputing in Python. Nature methods 17, 261–272.\n\n\nWaskom, M.L., 2021. Seaborn: Statistical data visualization. Journal of\nOpen Source Software 6, 3021.\n\n\nWickham, H., 2016. Programming with\nGgplot2. In: Wickham, H. (Ed.), Ggplot2: Elegant\nGraphics for Data Analysis, Use R!\nSpringer International Publishing, Cham, pp.\n241–253.\n\n\nWickham, H., Averick, M., Bryan, J., Chang, W., McGowan, L.D., François,\nR., Grolemund, G., Hayes, A., Henry, L., Hester, J., Kuhn, M., Pedersen,\nT.L., Miller, E., Bache, S.M., Müller, K., Ooms, J., Robinson, D.,\nSeidel, D.P., Spinu, V., Takahashi, K., Vaughan, D., Wilke, C., Woo, K.,\nYutani, H., 2019. Welcome\nto the tidyverse 4, 1686.\n\n\nWright, P.J., 2010. Methodological\nIssues in Paleoethnobotany: A\nconsideration of Issues, Methods, and\nCases. In: VanDerwarker, A.M., Peres, T.M. (Eds.),\nIntegrating Zooarchaeology and\nPaleoethnobotany: A Consideration of\nIssues, Methods, and Cases.\nSpringer New York, New York, NY, pp. 37–64.\n\n\nXie, Y., 2021. Knitr: A\ngeneral-purpose package for dynamic report generation in r."
  },
  {
    "objectID": "functions.html",
    "href": "functions.html",
    "title": "Custom functions",
    "section": "",
    "text": "This section contains the list of custom functions that have been written to prepare, handle and visualize the data exported from the database."
  },
  {
    "objectID": "functions.html#archaeobotany",
    "href": "functions.html#archaeobotany",
    "title": "Custom functions",
    "section": "Archaeobotany",
    "text": "Archaeobotany\n\narchaeobotany_tables()\nThis function has two arguments:\n\na dataframe of the exported table of plants from the database (view_archaeobot.csv).\n\n\n [1] \"site_code\"               \"site_name\"              \n [3] \"type_name\"               \"region_name\"            \n [5] \"data_valid_start\"        \"data_valid_end\"         \n [7] \"weight\"                  \"sampling_notes\"         \n [9] \"extra_notes\"             \"short_ref\"              \n[11] \"culture_type\"            \"x\"                      \n[13] \"y\"                       \"Triticum.aestivum.durum\"\n[15] \"Triticum.dicoccum\"       \"Triticum.monococcum\"    \n[17] \"Avena.sp\"                \"Hordeum.vulgare\"        \n[19] \"Panicum.milliaceum\"      \"Secale.cereale\"         \n[21] \"Setaria.italica\"         \"Sorghum.bicolor\"        \n[23] \"Cerealia.ind\"            \"Leguminosae\"            \n[25] \"Lens.culinaris\"          \"Pisum.sativum\"          \n[27] \"Vicia.faba\"              \"Vicia.sativa\"           \n[29] \"Vicia.sp\"                \"Lathyrus.cicera.sativus\"\n[31] \"Cicer.aretinum\"          \"Cornus.mas\"             \n[33] \"Corylus.avellana\"        \"Ficus.carica\"           \n[35] \"Fragaria.vesca\"          \"Juglans.regia\"          \n[37] \"Castanea.sativa\"         \"Malus.domestica\"        \n[39] \"Olea.europaea.L\"         \"Prunus.cerasus\"         \n[41] \"Prunus.avium\"            \"Prunus.sp\"              \n[43] \"Prunus.persica\"          \"Prunus.domestica\"       \n[45] \"Prunus.spinosa\"          \"Rubus.fruticosus\"       \n[47] \"Pyrus.communis\"          \"Sambucus.nigra\"         \n[49] \"Cucumis.melo\"            \"Vitis.vinifera\"         \n[51] \"Linum.usatissimus\"       \"Sorbus.sp\"              \n\n\nthe century of interest.\n\nThe function archaeobotany_tables() can be used to return the ubiquity, relative proportions or a print of the table with the sites from the chosen century. The comments in the code below explain the process.\n\n\nShow the code\n##FUNCTION FOR GENERATING CENTURY BASED\n# - UBIQUITY\n# - RELATIVE PROPORTIONS\n# - A PRINT OF THE TABLE\n\narchaeobotany_tables <- function(x, century) {\n  # Load the tidyverse library if it hasn't been loaded in the page before\n  library(tidyverse)\n  \n  # Remove NAs\n  x[is.na(x)] <-0 \n  \n  # Filter the table for the chosen century\n  # package: tidyverse\n  x <- filter(x, data_valid_start <= century & data_valid_end >= century)\n  \n  # The total of each row is needed to calculate the relative proportions\n  # Note: Calculation starts from column 14 because it is the first column with numerical data. If the table exported from the database changes, this number must be adjusted.\n  Total <- rowSums(x[,14:ncol(x)])\n  \n  # Subsetting the given dataframe by creating a new dataframe with fewer columns \n  plants <- data.frame(x$site_name, x$type_name, \n                       x$data_valid_start, x$data_valid_end,\n                       x$culture_type, x[14:ncol(x)], \n                       Total\n  )\n  \n  # Calculating the relative proportions and rounding the results to 2 digits.\n  Rel_Prop <- round(((x[14:ncol(x)]/Total)*100), digits=2)\n  \n  # Ubiquity: \n  #Note: It is given by the no. of sites where the plant is present divided by the total of sites\n  # Note: Total of sites: (No. of rows - header row)\n  \n  # Creating a new dataframe from the Relative Proportions one (Rel_Prop). \n  # Note: This can be done also from the original dataframe, it is not important since it is just a calculation based on presence/absence. I chose this dataframe as it has already the columns I need.\n  Pres_Abs <- Rel_Prop\n  \n  # If the value is > 0 it means that the plant is present: this line replaces this value with a 1 (indicating presence)\n  Pres_Abs[Pres_Abs > 0] <- 1\n  \n  # In how many sites is this plant present?\n  Tot_sites_present <- colSums(Pres_Abs)\n\n  # Finally calculate ubiquity\n  # Note: The score is multiplied by 100 to obtain results in %\n  Ubiquity <- (Tot_sites_present / nrow(Pres_Abs))*100\n  \n  return(list(\n    Ubiquity_exp = Ubiquity,\n    Rel_Prop_exp = Rel_Prop,\n    Raw_Counts = plants\n    ))\n}\n\n\n\n\nRel_Prop_per_Century()\nThis function has two arguments: - a dataframe of the exported table of plants from the database (view_archaeobot.csv).\n\nthe century of interest. The function Rel_Prop_per_Century() can be used to return the relative proportions of each site from the chosen century. The comments in the code below explain the process.\n\n\n\nShow the code\n## Convert each site raw data into relative proportions\n\nRel_Prop_per_Century <- function(x, century) {\n  \n  # Remove NAs\n  x[is.na(x)] <-0\n  \n  # Filter the table for the chosen century\n  # package: tidyverse\n  library(tidyverse)\n  x <- filter(x, data_valid_start <= century & data_valid_end >= century)\n  \n  # Calculate the total of the row and divide each value by the total to get proportions\n  # round() is used to get two decimal values\n  Total_per_site <- rowSums(x[,14:ncol(x)])\n  Rel_Prop_per_site <- round(((x[14:ncol(x)]/Total_per_site)*100), digits=2)\n  \n  # Create new dataframe with the information we need\n  plants_rel_prop <- data.frame(\n    \"Site\" = x$site_name, \n    \"Type\" = x$type_name, \n    \"From.Century\" = x$data_valid_start, \n    \"To.Century\"= x$data_valid_end,\n    \"Weight\"=x$weight,\n    \"Culture\"=x$culture_type, \n    \"x\"=x$x, \n    \"y\"=x$y,\n    Rel_Prop_per_site\n  )\n  \n  return(plants_rel_prop)\n}"
  },
  {
    "objectID": "functions.html#zooarchaeology",
    "href": "functions.html#zooarchaeology",
    "title": "Custom functions",
    "section": "Zooarchaeology",
    "text": "Zooarchaeology"
  },
  {
    "objectID": "intro.html",
    "href": "intro.html",
    "title": "1  Introduction",
    "section": "",
    "text": "Page under construction"
  }
]